<%- include('../components/head.ejs') %>
<%- include('../components/header.ejs') %>

<div class="container my-5">
  <h1 class="mb-4"><%= category.category_name %></h1>
  
  <div class="row">
    <% if (products && products.length > 0) { %>
      <% products.forEach(product => { %>
        <div class="col-md-3 mb-4">
          <div class="card h-100">
            <% if (product.image_name) { %>
              <img src="/imgs/products/<%= product.image_name %>" class="card-img-top" alt="<%= product.product_name %>">
            <% } else { %>
              <div class="card-img-top bg-light text-center py-5">No Image</div>
            <% } %>
            <div class="card-body">
              <h5 class="card-title"><%= product.product_name %></h5>
              <p class="card-text">
                <% if (product.product_sale_price) { %>
                  <span class="text-decoration-line-through"><%= product.product_price.toLocaleString('vi-VN') %>₫</span>
                  <span class="text-danger fw-bold"><%= product.product_sale_price.toLocaleString('vi-VN') %>₫</span>
                <% } else { %>
                  <span class="fw-bold"><%= product.product_price.toLocaleString('vi-VN') %>₫</span>
                <% } %>
              </p>
              <a href="/products/<%= product.product_id %>" class="btn btn-primary">Xem chi tiết</a>
              <button class="btn btn-success add-to-cart" data-product-id="<%= product.product_id %>">Thêm vào giỏ</button>
            </div>
          </div>
        </div>
      <% }); %>
    <% } else { %>
      <div class="col">
        <p>Không có sản phẩm nào trong danh mục này.</p>
      </div>
    <% } %>
  </div>
</div>

<%- include('../components/footer.ejs') %>
